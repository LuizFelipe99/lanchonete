<div class="settings-page">
  <mat-card class="form-card">

    <!-- Cabeçalho -->
    <div class="form-head">
      <div class="head-left">
        <mat-icon>tune</mat-icon>
        <span>Configurações</span>
      </div>
      <div class="head-right">
        <mat-spinner *ngIf="isLoad" diameter="28"></mat-spinner>
      </div>
    </div>

    <!-- Formulário -->
    <form class="form-body" (keyup.enter)="save()">
      <div class="form-grid one-col">

        <!-- Linha 1: Logo (largura total) -->
        <div class="col-2">
          <div class="logo-field">
            <div class="logo-head">
              <mat-icon>image</mat-icon>
              <span>Logo</span>
            </div>

            <div class="logo-row">
              <button type="button" mat-stroked-button (click)="fileInput.click()">
                <mat-icon>upload</mat-icon>
                Selecionar
              </button>
              <span class="file-name" *ngIf="logoFileName">{{ logoFileName }}</span>
              <input #fileInput type="file" accept="image/*" (change)="onLogoChange($event)" hidden />
            </div>

            <!-- Preview sem distorcer -->
            <div class="logo-preview-box" *ngIf="previewUrl">
              <img [src]="previewUrl" alt="Pré-visualização do logo" class="logo-preview" />
            </div>
          </div>
        </div>

        <!-- Cores (uma por linha, largura contida) -->
        <mat-form-field appearance="outline" class="full compact">
          <mat-label>Cor primária do sistema</mat-label>
          <mat-icon matPrefix>palette</mat-icon>
          <input matInput type="color" name="primary_color" [(ngModel)]="settings.primaryColor" />
          <span matSuffix class="hex">{{ settings.primaryColor }}</span>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full compact">
          <mat-label>Cor secundária do sistema</mat-label>
          <mat-icon matPrefix>color_lens</mat-icon>
          <input matInput type="color" name="secondary_color" [(ngModel)]="settings.secondaryColor" />
          <span matSuffix class="hex">{{ settings.secondaryColor }}</span>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full compact">
          <mat-label>Cor do botão de sair</mat-label>
          <mat-icon matPrefix>logout</mat-icon>
          <input matInput type="color" name="logout_color" [(ngModel)]="settings.logoutButtonColor" />
          <span matSuffix class="hex">{{ settings.logoutButtonColor }}</span>
        </mat-form-field>

      </div>
    </form>

    <!-- Ações -->
    <mat-card-actions class="actions">
      <button mat-button type="button" class="button-warning" (click)="reset()">Cancelar</button>
      <button mat-raised-button class="button-success" color="primary" (click)="save()">Salvar</button>
    </mat-card-actions>

  </mat-card>
</div>
