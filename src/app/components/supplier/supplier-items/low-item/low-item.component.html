<div class="stock-low-page">
  <mat-card class="form-card">
    <!-- Cabeçalho -->
    <div class="form-head">
      <div class="head-left">
        <mat-icon>inventory_2</mat-icon>
        <span>Baixa de item</span>
      </div>
      <div class="head-right">
        <mat-spinner *ngIf="isLoad" diameter="28"></mat-spinner>
      </div>
    </div>

    <!-- Form -->
    <form class="form-body" (keyup.enter)="lowItemStock()">
      <div class="form-grid">
        <!-- Item com autocomplete -->
        <mat-form-field appearance="outline" class="col-2">
          <mat-label>Item</mat-label>
          <input
            matInput
            placeholder="Digite para buscar..."
            [formControl]="itemControl"
            [(ngModel)]="lowItem.id_item"
            ngModelOptions="{standalone: true}"
            [matAutocomplete]="auto"
            required
          />
          <mat-icon matPrefix>search</mat-icon>
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of filteredItems | async" [value]="option.id_item">
              {{ option.name }}
            </mat-option>
          </mat-autocomplete>
          <mat-hint>Escolha o item para dar baixa</mat-hint>
        </mat-form-field>

        <!-- Quantidade -->
        <mat-form-field appearance="outline" class="">
          <mat-label>Quantidade</mat-label>
          <input
            matInput
            type="number"
            min="1"
            placeholder="Ex.: 1"
            name="qte"
            [(ngModel)]="lowItem.qte_remove"
            required
          />
          <mat-icon matSuffix>remove_circle</mat-icon>
          <mat-hint>Informe a quantidade a remover do estoque</mat-hint>
        </mat-form-field>
      </div>
    </form>

    <!-- Ações -->
    <mat-card-actions class="actions">
      <button mat-raised-button class="button-success" (click)="lowItemStock()">
        Salvar
      </button>
    </mat-card-actions>
  </mat-card>
</div>
