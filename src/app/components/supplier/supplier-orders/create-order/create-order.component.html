<div class="order-create-page">

  <mat-card class="form-card">
    <div class="form-card__head">
      <div class="head-left">
        <mat-icon>library_add</mat-icon>
        <span>Novo pedido fornecedor</span>
      </div>

    </div>

    <!-- Loading -->
    <div class="loading-content">
      <mat-spinner *ngIf="isLoad" diameter="40"></mat-spinner>
    </div>

    <!-- Formulário -->
    <form class="form-grid">

      <mat-form-field appearance="outline">
        <mat-label>Fornecedor</mat-label>
        <mat-select name="type" [(ngModel)]="newOrder.id_supplier">
          <mat-option *ngFor="let name of suppliers" [value]="name.id_supplier">
            {{ name.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Data (fica como Date no template; a formatação para dd/MM/yyyy é feita no TS ao enviar) -->
      <mat-form-field appearance="outline">
        <mat-label>Data de vencimento</mat-label>
        <input matInput [matDatepicker]="datepicker" name="dt_expired" [(ngModel)]="newOrder.dt_expired">
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="datepicker"></mat-datepicker-toggle>
        <mat-datepicker #datepicker>
          <mat-datepicker-actions>
            <button mat-button matDatepickerCancel>Cancelar</button>
            <button mat-raised-button class="button-apply" matDatepickerApply>Aplicar</button>
          </mat-datepicker-actions>
        </mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="col-span-2">
        <mat-label>Observação</mat-label>
        <textarea matInput placeholder="Ex. Pedido fora do padrão..."></textarea>
      </mat-form-field>

      <!-- Seleção de itens após criar o pedido -->
      <div class="items-cta col-span-2" *ngIf="addItem">
        <mat-form-field appearance="outline" class="items-cta__input">
          <mat-label>Itens</mat-label>
          <input matInput placeholder="Ex. Pão" disabled>
        </mat-form-field>

        <button mat-raised-button class="button-success items-cta__button"
                (click)="globalService.openDialog('Selecione o item','list-item','1','80%')">
          Buscar
          <mat-icon>search</mat-icon>
        </button>
      </div>

    </form>

    <div class="form-card__footer">
      <button mat-raised-button class="button-success" (click)="createNewOrder()">
        Processar
      </button>
    </div>
  </mat-card>

</div>
